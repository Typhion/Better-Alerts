run_sgui_var_toggle = {
	# Used to run a scripted gui on a country
	# VAR = Variable to toggle with effect
	every_country = {
		limit = {
			is_ai = no
			exists = scope:player_credit
		}
		set_local_variable = {
			name = upper
			value = {
				add = credit
				add = 1
			}
		}
		set_local_variable = {
			name = lower
			value = {
				add = credit
				subtract = 1
			}
		}
		if = {
			limit = {
				# scope:player_credit = GetPlayer.GetMaxCredit
				exists = local_var:lower
				exists = local_var:upper
				# Check range because of rounding, i think
				scope:player_credit >= local_var:lower
				scope:player_credit <= local_var:upper
			}
			if = {
				limit = {
					has_variable = $VAR$
				}
				remove_variable = $VAR$
			}
			else = {
				set_variable = $VAR$
			}
		}
		remove_local_variable = lower
		remove_local_variable = upper
	}
}